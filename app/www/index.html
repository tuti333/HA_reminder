<!DOCTYPE html>
<html lang="pl">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <meta charset="UTF-8">
  <!-- tell the UA we support both light and dark; ingress/service can still force dark mode -->
  <meta name="color-scheme" content="light dark">
  <title>Przypomnienia</title>
  <style>
    /* always keep a white background even if the user or container forces dark mode */
    html, body {
      background-color: white !important;
      color: black !important;
    }

    /* normal styles */
    button { margin-left: 6px; }
    table, th, td {
      border:1px solid black;
      border-collapse: collapse;
    }

    /* optional: if you later want true dark-mode styling, use this media query */
    @media (prefers-color-scheme: dark) {
      /* override any UA dark-mode adjustments that might try to invert colors */
      html, body {
        background-color: white !important;
        color: black !important;
      }
    }
    /* keep small checkbox group inline with other controls */
    .inline-fieldset {
      display: inline-flex;
      gap: 0.5rem;
      align-items: center;
      flex-wrap: wrap;
      width: auto;
      border: none;
      padding: 0;
      margin: 0;
      vertical-align: middle;
    }
    .inline-fieldset label { margin: 0; }
    /* compact dose control */
    .dose { display: inline-flex; align-items: center; gap: 0.25rem; vertical-align: middle; }
    .dose-input { width: 50px; }
    .dose-suffix { font-size: 0.9rem; color: #333; }
    /* make form buttons stand out from inputs */
    form button[type="submit"] {
      background-color: #198754;
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    form button[type="submit"]:hover { filter: brightness(0.95); }
    form button[type="button"] {
      background-color: #fc6464;
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    form button[type="button"]:hover { filter: brightness(0.95); }
  </style>
</head>
<body>

<h1>Konfiguruj przyjmowane leki</h1>

<form id="form">
  <input type="hidden" id="id">
  <input id="name" placeholder="Nazwa" required>
  <!-- multiple choice using checkboxes, easier for mobile/keyboard -->
  <fieldset id="time" class="inline-fieldset">
    <label><input type="checkbox" value="1"> Rano</label>
    <label><input type="checkbox" value="2"> Popołudnie</label>
    <label><input type="checkbox" value="3"> Wieczorem</label>
  </fieldset>
  <span class="dose">
    <input id="dose" class="dose-input" type="number" min="1" value="1">
    <span class="dose-suffix">szt</span>
  </span>
  <select id="frequency">
    <option value="1">Raz dziennie</option>
    <option value="2">Co 2 dzień</option>
  </select>
  <select id="userSelect" required>
      <option value="Magda">Magda</option>
      <option value="Mateusz">Mateusz</option>
  </select>
  <button type="submit">Zapisz</button>
  <button type="button" onclick="resetForm()">Anuluj</button>
</form>

<ul id="list"></ul>

<h1>Twój terminarz brania leków</h1>
<h3>Data: <span id="todayDate">{{ current_time }}</span></h3>



<table>
  <thead>
    <tr>
        <th colspan="2">Leki na dziś</th>
    </tr>
    <tr>
        <th>Magda</th>
        <th>Mateusz</th>
    </tr>
  </thead>
  <tbody id="usersTable">
    <!-- STAŁY wiersz 1: Rano -->
    <tr>
        <td colspan="2">
            <i class="bi bi-sunrise-fill me-2"></i> Rano (6:00-12:59)
        </td>
    </tr>
    <tr>
        <td style="vertical-align: top;">
            <div data-user="1" data-period="rano" id="Magda-rano">
            </div>
            <div>
              <button onclick="markAllTaken('Magda', 'rano')">
                <i class="bi bi-check-lg"></i> Wzięte
              </button>
              <button onclick="skipAll('Magda', 'rano')">
                <i class="bi bi-x-lg"></i> Pominięte
              </button>
            </div>
        </td>
        <td style="vertical-align: top;">
            <div data-user="2" data-period="rano" id="Mateusz-rano">
            </div>
            <div>
              <button onclick="markAllTaken('Mateusz', 'rano')">
                <i class="bi bi-check-lg"></i> Wzięte
              </button>
              <button onclick="skipAll('Mateusz', 'rano')">
                <i class="bi bi-x-lg"></i> Pominięte
              </button>
            </div>
        </td>
    </tr>

    <!-- STAŁY wiersz 2: Popołudnie -->
    <tr>
        <td colspan="2">
            <i class="bi bi-sun-fill me-2"></i> Popołudnie (13:00-18:59)
        </td>
    </tr>
    <tr>
        <td style="vertical-align: top;">
            <div data-user="1" data-period="popołudnie" id="Magda-popołudnie">
            </div>
            <div>
              <button onclick="markAllTaken('Magda', 'popołudnie')">
                <i class="bi bi-check-lg"></i> Wzięte
              </button>
              <button onclick="skipAll('Magda', 'popołudnie')">
                <i class="bi bi-x-lg"></i> Pominięte
              </button>
            </div>
        </td>
        <td style="vertical-align: top;">
            <div data-user="2" data-period="popołudnie" id="Mateusz-popołudnie">
            </div>
            <div>
              <button onclick="markAllTaken('Mateusz', 'popołudnie')">
                <i class="bi bi-check-lg"></i> Wzięte
              </button>
              <button onclick="skipAll('Mateusz', 'popołudnie')">
                <i class="bi bi-x-lg"></i> Pominięte
              </button>
            </div>
        </td>
    </tr>

    <!-- STAŁY wiersz 3: Wieczór -->
    <tr>
        <td colspan="2">
            <i class="bi bi-moon-stars-fill me-2"></i> Wieczór (19:00-05:59)
        </td>
    </tr>
    <tr>
        <td style="vertical-align: top;">
            <div data-user="1" data-period="wieczór" id="Magda-wieczór">
            </div>
            <div>
              <button onclick="markAllTaken('Magda', 'wieczór')">
                <i class="bi bi-check-lg"></i> Wzięte
              </button>
              <button onclick="skipAll('Magda', 'wieczór')">
                <i class="bi bi-x-lg"></i> Pominięte
              </button>
            </div>
        </td>
        <td style="vertical-align: top;">
            <div data-user="2" data-period="wieczór" id="Mateusz-wieczór">
            </div>
            <div>
              <button onclick="markAllTaken('Mateusz', 'wieczór')">
                <i class="bi bi-check-lg"></i> Wzięte
              </button>
              <button onclick="skipAll('Mateusz', 'wieczór')">
                <i class="bi bi-x-lg"></i> Pominięte
              </button>
            </div>
        </td>
    </tr>
  </tbody>
</table>


<script src="static/app.js"></script>
</body>
</html>